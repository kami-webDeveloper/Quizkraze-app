const mongoose = require("mongoose");

const quizSchema = new mongoose.Schema(
  {
    title: {
      type: String,
      required: [true, "Quiz must have a title"],
      minlength: 4,
      maxlength: 100,
    },
    description: { type: String, minlength: 10, maxlength: 200 },
    category: {
      type: String,
      enum: [
        "None",
        "Other",
        "Job Interview",
        "Resume Building",
        "Public Speaking",
        "Business Etiquette",
        "Leadership",
        "Time Management",
        "Project Management",
        "Financial Literacy",
        "Productivity Tools",
        "Critical Thinking",
        "General Knowledge",
        "Geography",
        "World History",
        "Famous People",
        "Fun Facts",
        "Logic Puzzles",
        "Pop Culture",
        "Riddles",
        "Brain Teasers",
        "Mythology",
        "Biology",
        "Chemistry",
        "Physics",
        "Environmental Science",
        "Astronomy",
        "Arithmetic",
        "Algebra",
        "Geometry",
        "Calculus",
        "Statistics",
        "English Grammar",
        "Literature",
        "Writing Skills",
        "Vocabulary",
        "Spelling",
        "Art & Design",
        "Music Theory",
        "Civics",
        "Economics",
        "Psychology",
        "Sociology",
        "Anthropology",
        "Political Science",
      ],
      default: "None",
    },
    difficulty: {
      type: String,
      enum: ["", "regular", "medium", "intermediate", "advanced"],
    },
    timelimit: { type: String },
    isActive: { type: Boolean, default: true },
    questions: [{ type: mongoose.Schema.Types.ObjectId, ref: "Question" }],
    createdBy: {
      type: mongoose.Schema.Types.ObjectId,
      ref: "User",
      required: true,
    },
    participants: [{ type: mongoose.Schema.Types.ObjectId, ref: "User" }],
  },
  { timestamps: true }
);

quizSchema.index({ createdBy: 1 });

module.exports = mongoose.model("Quiz", quizSchema);
